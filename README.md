# Jarvis Chart

Суть в чём - обычный SVG-style декларативный рендеринг, НО:

1) Для рендеринга примитивов нужно использовать прокси элементы (чтобы позднее реализацию рендера можно было подменять)
2) Для позиционирования элементов используется матрица из контекста, изменения которой накапливаются

Примитивы при рендеринге подхватывают матрицу и позиционируются на экране правильным образом.

Также существует примитив MatrixOptimizer, конечно применяющий матрицу преобразований к своему элементу и прекращающий нисхождение матрицы по контексту.
Для SVG и HTML MatrixOptimizer реализован как `g` или `div`, применяющий трансформацию. Для канвас MatrixOptimizer не применят трансформацию, а передаёт её дальше.

Примитивы, видя, что матрицы нет, не прибегают к трансформации и получается более производительное приложение

## Примитивы

6. Frame - базовый элемент рендера. Создаёт необходимый контекст
1. Rectangle - прямоугольник
2. Circle - круг
3. Line - линия
4. Text - текст
5. Group - создан для группирования элементов
7. MatrixOptimizer - матричный оптимизатор. Применяет преобразования на месте, не передавая матрицу дальше. Ничего не делает для canvas

## Оптимизации

1) Чаще использовать собственное (не матричное) позиционирование элементов. Лучше один раз применить MatrixOptimizer и позиционировать элементы относительно применённой матрицы
2) Минимально на лету рассчитывать матричные преобразования
